<!-- -->
<launch>

  <!-- 
    # for carla, adjust velocity and acceleration PIDs  #
  -->
  <node name="$(anon dynparam)" pkg="dynamic_reconfigure" type="dynparam" args="set_from_parameters carla/ego_vehicle/ackermann_control">
    <param name="speed_Kp" type="double" value="0.15" />
    <param name="speed_Ki" type="double" value="0.1" />
    <param name="speed_Kd" type="double" value="0.4" />

    <param name="accel_Kp" type="double" value="0.1" />
    <param name="accel_Ki" type="double" value="0.2" />
    <param name="accel_Kd" type="double" value="0.1" />
  </node>

  <!-- 
    # open planner, trajectory generation params #
    @todo: still required?
  -->
<include file="$(find op_local_planner)/launch/op_trajectory_generator.launch">
	<arg name="samplingTipMargin" 		default="4"  /> 
	<arg name="samplingOutMargin" 		default="12" /> 
	<arg name="samplingSpeedFactor" 	default="0.25" />		
	<arg name="enableHeadingSmoothing" 	default="false" />
</include> 


  <!-- 
    # open planner, motion prediction params #
    @todo: still required?
  -->
<include file="$(find op_local_planner)/launch/op_motion_predictor.launch">
	<arg name="max_distance_to_lane" 		default="1.0"/>
	<arg name="prediction_distance" 		default="25.0"/>
	<arg name="enableGenrateBranches" 		default="false"/>
	<arg name="enableCurbObstacles" 		default="false" />
	<arg name="distanceBetweenCurbs" 		default="1.5" />
	<arg name="visualizationTime" 			default="0.01" />
	<arg name="enableStepByStepSignal" 		default="false" />
	<arg name="enableParticleFilterPrediction" 	default="false" />
		
	<arg name="pose_weight_factor" 	default="0.2" />
	<arg name="dir_weight_factor" 	default="0.2" />
	<arg name="vel_weight_factor" 	default="0.2" />
	<arg name="acc_weight_factor" 	default="0.2" />
	<arg name="ind_weight_factor" 	default="0.2" />
	
	<arg name="particles_number" 	default="50" />	
	<arg name="min_particles_num" 	default="2" />
	<arg name="keep_percentage" 	default="0.5" />
  </include> 

  <!-- 
    # open planner, trajectory evaluation params #
    @todo: still required?
  -->
<include file="$(find op_local_planner)/launch/op_trajectory_evaluator.launch">
	<arg name="enablePrediction" 	default="false" />
</include> 

  <!-- 
    # open planner, Behavior Generator params #
    @todo: still required?
  -->
<include file="$(find op_local_planner)/launch/op_behavior_selector.launch">
	<arg name="evidence_trust_number" 	default="25"/>
	<arg name="use_sim_time" 		default="false"/>	
</include> 

</launch>

